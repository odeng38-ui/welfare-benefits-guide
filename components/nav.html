<!-- ê³µí†µ ë„¤ë¹„ê²Œì´ì…˜ ì»´í¬ë„ŒíŠ¸ (components/nav.html) -->
<nav class="tab-container" role="navigation" aria-label="ìƒì• ì£¼ê¸°ë³„ í˜œíƒ ì¹´í…Œê³ ë¦¬">
  <div class="nav-scroll-container">
    <ul class="tab-list" role="tablist">
      <li class="tab-item" role="none">
        <a class="tab-link {{baby-active}}" 
           href="{{baseUrl}}pages/baby.html" 
           role="tab" 
           aria-label="ì‹ ìƒì•„ ê°€ì • ì§€ì› (0-2ì„¸)"
           data-category="baby">
          <span class="tab-icon" aria-hidden="true">ğŸ‘¶</span>
          <span class="tab-text">ì‹ ìƒì•„ ê°€ì •</span>
          <span class="tab-subtitle">0-2ì„¸</span>
        </a>
      </li>
      
      <li class="tab-item" role="none">
        <a class="tab-link {{student-active}}" 
           href="{{baseUrl}}pages/student.html" 
           role="tab" 
           aria-label="í•™ë ¹ê¸° ê°€ì • ì§€ì› (3-18ì„¸)"
           data-category="student">
          <span class="tab-icon" aria-hidden="true">ğŸ’</span>
          <span class="tab-text">í•™ë ¹ê¸° ê°€ì •</span>
          <span class="tab-subtitle">3-18ì„¸</span>
        </a>
      </li>
      
      <li class="tab-item" role="none">
        <a class="tab-link {{youth-active}}" 
           href="{{baseUrl}}pages/youth.html" 
           role="tab" 
           aria-label="ì²­ë…„ ë…ë¦½ê¸° ì§€ì› (19-34ì„¸)"
           data-category="youth">
          <span class="tab-icon" aria-hidden="true">ğŸ“</span>
          <span class="tab-text">ì²­ë…„ ë…ë¦½ê¸°</span>
          <span class="tab-subtitle">19-34ì„¸</span>
        </a>
      </li>
      
      <li class="tab-item" role="none">
        <a class="tab-link {{career-active}}" 
           href="{{baseUrl}}pages/career.html" 
           role="tab" 
           aria-label="ê²½ë ¥ ë°œì „ê¸° ì§€ì› (35-54ì„¸)"
           data-category="career">
          <span class="tab-icon" aria-hidden="true">ğŸ’¼</span>
          <span class="tab-text">ê²½ë ¥ ë°œì „ê¸°</span>
          <span class="tab-subtitle">35-54ì„¸</span>
        </a>
      </li>
      
      <li class="tab-item" role="none">
        <a class="tab-link {{senior-active}}" 
           href="{{baseUrl}}pages/senior.html" 
           role="tab" 
           aria-label="ì€í‡´ ì¤€ë¹„ê¸° ì§€ì› (55ì„¸+)"
           data-category="senior">
          <span class="tab-icon" aria-hidden="true">ğŸŒ…</span>
          <span class="tab-text">ì€í‡´ ì¤€ë¹„ê¸°</span>
          <span class="tab-subtitle">55ì„¸+</span>
        </a>
      </li>
      
      <li class="tab-item" role="none">
        <a class="tab-link {{disability-active}}" 
           href="{{baseUrl}}pages/disability.html" 
           role="tab" 
           aria-label="ì¥ì• ì¸ ì§€ì› (ì „ì—°ë ¹)"
           data-category="disability">
          <span class="tab-icon" aria-hidden="true">ğŸ¦½</span>
          <span class="tab-text">ì¥ì• ì¸ ì§€ì›</span>
          <span class="tab-subtitle">ì „ì—°ë ¹</span>
        </a>
      </li>
      
      <li class="tab-item" role="none">
        <a class="tab-link {{women-active}}" 
           href="{{baseUrl}}pages/women.html" 
           role="tab" 
           aria-label="ì—¬ì„±/ê°€ì¡± ì§€ì› (ìƒì• ì „ë°˜)"
           data-category="women">
          <span class="tab-icon" aria-hidden="true">ğŸ‘©</span>
          <span class="tab-text">ì—¬ì„±/ê°€ì¡±</span>
          <span class="tab-subtitle">ìƒì• ì „ë°˜</span>
        </a>
      </li>
      
      <li class="tab-item" role="none">
        <a class="tab-link {{rural-active}}" 
           href="{{baseUrl}}pages/rural.html" 
           role="tab" 
           aria-label="ë†ì–´ì´Œ ì§€ì› (ë†ì–´ì—…ì¸)"
           data-category="rural">
          <span class="tab-icon" aria-hidden="true">ğŸŒ¾</span>
          <span class="tab-text">ë†ì–´ì´Œ</span>
          <span class="tab-subtitle">ë†ì–´ì—…ì¸</span>
        </a>
      </li>
      
      <li class="tab-item" role="none">
        <a class="tab-link {{culture-active}}" 
           href="{{baseUrl}}pages/culture.html" 
           role="tab" 
           aria-label="ë¬¸í™”/ì—¬ê°€ ì§€ì› (ë¬¸í™”ìƒí™œ)"
           data-category="culture">
          <span class="tab-icon" aria-hidden="true">ğŸ­</span>
          <span class="tab-text">ë¬¸í™”/ì—¬ê°€</span>
          <span class="tab-subtitle">ë¬¸í™”ìƒí™œ</span>
        </a>
      </li>
      
      <li class="tab-item" role="none">
        <a class="tab-link {{emergency-active}}" 
           href="{{baseUrl}}pages/emergency.html" 
           role="tab" 
           aria-label="ê¸´ê¸‰ìƒí™© ì§€ì› (ì¦‰ì‹œì§€ì›)"
           data-category="emergency">
          <span class="tab-icon" aria-hidden="true">ğŸ†˜</span>
          <span class="tab-text">ê¸´ê¸‰ìƒí™©</span>
          <span class="tab-subtitle">ì¦‰ì‹œì§€ì›</span>
        </a>
      </li>
      
      <li class="tab-item" role="none">
        <a class="tab-link {{business-active}}" 
           href="{{baseUrl}}pages/business.html" 
           role="tab" 
           aria-label="ì‚¬ì—…ì ì§€ì› (ì°½ì—…/ìš´ì˜)"
           data-category="business">
          <span class="tab-icon" aria-hidden="true">ğŸª</span>
          <span class="tab-text">ì‚¬ì—…ì ì§€ì›</span>
          <span class="tab-subtitle">ì°½ì—…/ìš´ì˜</span>
        </a>
      </li>
    </ul>
  </div>
  
  <!-- ìŠ¤í¬ë¡¤ ì¸ë””ì¼€ì´í„° -->
  <div class="scroll-indicator" id="scrollIndicator">
    <div class="scroll-indicator-track">
      <div class="scroll-indicator-thumb" id="scrollThumb"></div>
    </div>
    <div class="scroll-hint">â† ì¢Œìš°ë¡œ ìŠ¤í¬ë¡¤ â†’</div>
  </div>
  
  <!-- ë„¤ë¹„ê²Œì´ì…˜ ì»¨íŠ¸ë¡¤ -->
  <div class="nav-controls">
    <button class="nav-control nav-prev" 
            onclick="scrollNavigation('left')" 
            aria-label="ì´ì „ ì¹´í…Œê³ ë¦¬ë“¤ ë³´ê¸°"
            title="ì´ì „">
      â†
    </button>
    <button class="nav-control nav-next" 
            onclick="scrollNavigation('right')" 
            aria-label="ë‹¤ìŒ ì¹´í…Œê³ ë¦¬ë“¤ ë³´ê¸°"
            title="ë‹¤ìŒ">
      â†’
    </button>
  </div>
  
  <!-- ë„¤ë¹„ê²Œì´ì…˜ ìš”ì•½ (ìŠ¤í¬ë¦° ë¦¬ë”ìš©) -->
  <div class="nav-summary hidden-text" aria-live="polite" id="navSummary">
    í˜„ì¬ {{currentCategory}} í˜ì´ì§€ì…ë‹ˆë‹¤. ì´ 11ê°œì˜ ì¹´í…Œê³ ë¦¬ê°€ ìˆìŠµë‹ˆë‹¤.
  </div>
</nav>

<!-- ë„¤ë¹„ê²Œì´ì…˜ ì „ìš© ìŠ¤íƒ€ì¼ -->
<style>
/* ë„¤ë¹„ê²Œì´ì…˜ ì»¨í…Œì´ë„ˆ ê°œì„  */
.tab-container {
  position: fixed;
  top: 90px;
  left: 0;
  width: 100%;
  background: rgba(30, 30, 30, 0.95);
  backdrop-filter: blur(10px);
  z-index: 999;
  box-shadow: 0 2px 15px rgba(0, 0, 0, 0.6);
  border-bottom: 1px solid var(--border);
}

.nav-scroll-container {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}

.nav-scroll-container::-webkit-scrollbar {
  display: none; /* Chrome/Safari */
}

.tab-list {
  display: flex;
  list-style: none;
  min-width: max-content;
  padding: 0 15px;
  margin: 0;
  gap: 5px;
}

.tab-item {
  flex-shrink: 0;
}

.tab-link {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px 16px;
  color: var(--text-secondary);
  text-decoration: none;
  font-size: 12px;
  font-weight: 600;
  white-space: nowrap;
  position: relative;
  transition: all 0.3s ease;
  border-radius: 8px 8px 0 0;
  text-align: center;
  line-height: 1.2;
  min-width: 80px;
}

.tab-icon {
  font-size: 20px;
  margin-bottom: 4px;
  display: block;
  transition: transform 0.3s ease;
}

.tab-text {
  font-size: 11px;
  margin-bottom: 2px;
}

.tab-subtitle {
  font-size: 9px;
  color: var(--text-secondary);
  opacity: 0.8;
}

/* í™œì„± ìƒíƒœ */
.tab-link.active {
  color: var(--primary);
  background: rgba(79, 195, 247, 0.15);
  text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
}

.tab-link.active .tab-icon {
  transform: scale(1.1);
  filter: drop-shadow(0 0 8px rgba(79, 195, 247, 0.5));
}

.tab-link.active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 60%;
  height: 3px;
  background: var(--primary);
  transform: translateX(-50%);
  border-radius: 3px;
  box-shadow: 0 0 10px var(--primary);
}

/* í˜¸ë²„ íš¨ê³¼ */
.tab-link:hover:not(.active) {
  color: var(--text-primary);
  background: rgba(255, 255, 255, 0.05);
}

.tab-link:hover .tab-icon {
  transform: scale(1.05);
}

/* í¬ì»¤ìŠ¤ íš¨ê³¼ (ì ‘ê·¼ì„±) */
.tab-link:focus {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

/* ìŠ¤í¬ë¡¤ ì¸ë””ì¼€ì´í„° */
.scroll-indicator {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: rgba(255, 255, 255, 0.1);
  display: none;
}

.scroll-indicator-track {
  position: relative;
  width: 100%;
  height: 100%;
}

.scroll-indicator-thumb {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: var(--primary);
  border-radius: 1px;
  transition: all 0.3s ease;
}

.scroll-hint {
  position: absolute;
  top: -20px;
  right: 10px;
  font-size: 10px;
  color: var(--text-secondary);
  opacity: 0.7;
  display: none;
}

/* ë„¤ë¹„ê²Œì´ì…˜ ì»¨íŠ¸ë¡¤ */
.nav-controls {
  display: none;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 100%;
  pointer-events: none;
}

.nav-control {
  position: absolute;
  top: 0;
  width: 30px;
  height: 30px;
  background: rgba(79, 195, 247, 0.9);
  color: var(--bg-dark);
  border: none;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 14px;
  transition: all 0.3s ease;
  pointer-events: auto;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.nav-prev {
  left: 5px;
}

.nav-next {
  right: 5px;
}

.nav-control:hover {
  background: var(--primary);
  transform: scale(1.1);
}

.nav-control:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ì¹´í…Œê³ ë¦¬ë³„ ê°•ì¡° ìƒ‰ìƒ */
.tab-link[data-category="emergency"] {
  border-bottom: 2px solid #ff4444;
}

.tab-link[data-category="emergency"].active {
  background: rgba(255, 68, 68, 0.15);
  color: #ff6b6b;
}

.tab-link[data-category="business"] {
  border-bottom: 2px solid #9c27b0;
}

.tab-link[data-category="business"].active {
  background: rgba(156, 39, 176, 0.15);
  color: #ba68c8;
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
  .tab-container {
    top: 120px;
  }
  
  .tab-link {
    padding: 10px 12px;
    min-width: 70px;
  }
  
  .tab-icon {
    font-size: 16px;
  }
  
  .tab-text {
    font-size: 10px;
  }
  
  .tab-subtitle {
    font-size: 8px;
  }
  
  .scroll-indicator {
    display: block;
  }
  
  .scroll-hint {
    display: block;
  }
  
  .nav-controls {
    display: block;
  }
}

@media (max-width: 480px) {
  .tab-list {
    padding: 0 10px;
    gap: 3px;
  }
  
  .tab-link {
    padding: 8px 10px;
    min-width: 60px;
  }
  
  .tab-icon {
    font-size: 14px;
    margin-bottom: 2px;
  }
  
  .tab-text {
    font-size: 9px;
  }
  
  .tab-subtitle {
    font-size: 7px;
  }
}

/* í„°ì¹˜ ë””ë°”ì´ìŠ¤ ìµœì í™” */
@media (hover: none) and (pointer: coarse) {
  .tab-link {
    padding: 14px 18px;
  }
  
  .tab-link:hover {
    background: none;
    color: var(--text-secondary);
  }
  
  .tab-link:active {
    background: rgba(255, 255, 255, 0.1);
  }
}

/* ë‹¤í¬ëª¨ë“œ ì§€ì› */
@media (prefers-color-scheme: dark) {
  .tab-container {
    background: rgba(18, 18, 18, 0.95);
  }
}

/* ê³ ëŒ€ë¹„ ëª¨ë“œ */
body.high-contrast .tab-link.active {
  background: var(--primary);
  color: var(--bg-dark);
}

body.high-contrast .tab-link:not(.active) {
  border: 1px solid var(--border);
}

/* í° ê¸€ì ëª¨ë“œ */
body.large-font .tab-text {
  font-size: 13px;
}

body.large-font .tab-subtitle {
  font-size: 11px;
}

body.large-font .tab-icon {
  font-size: 22px;
}

/* ì• ë‹ˆë©”ì´ì…˜ ê°ì†Œ ì„ í˜¸ */
@media (prefers-reduced-motion: reduce) {
  .tab-link,
  .tab-icon,
  .nav-control,
  .scroll-indicator-thumb {
    transition: none;
  }
  
  .tab-icon {
    transform: none !important;
  }
}
</style>

<!-- ë„¤ë¹„ê²Œì´ì…˜ ì „ìš© JavaScript -->
<script>
// ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥
function scrollNavigation(direction) {
  const container = document.querySelector('.nav-scroll-container');
  const scrollAmount = 200;
  
  if (direction === 'left') {
    container.scrollLeft -= scrollAmount;
  } else {
    container.scrollLeft += scrollAmount;
  }
  
  updateScrollIndicator();
  updateNavigationControls();
}

// ìŠ¤í¬ë¡¤ ì¸ë””ì¼€ì´í„° ì—…ë°ì´íŠ¸
function updateScrollIndicator() {
  const container = document.querySelector('.nav-scroll-container');
  const thumb = document.getElementById('scrollThumb');
  
  if (!container || !thumb) return;
  
  const scrollRatio = container.scrollLeft / (container.scrollWidth - container.clientWidth);
  const thumbWidth = (container.clientWidth / container.scrollWidth) * 100;
  const thumbPosition = scrollRatio * (100 - thumbWidth);
  
  thumb.style.width = `${thumbWidth}%`;
  thumb.style.left = `${thumbPosition}%`;
}

// ë„¤ë¹„ê²Œì´ì…˜ ì»¨íŠ¸ë¡¤ ì—…ë°ì´íŠ¸
function updateNavigationControls() {
  const container = document.querySelector('.nav-scroll-container');
  const prevBtn = document.querySelector('.nav-prev');
  const nextBtn = document.querySelector('.nav-next');
  
  if (!container || !prevBtn || !nextBtn) return;
  
  prevBtn.disabled = container.scrollLeft <= 0;
  nextBtn.disabled = container.scrollLeft >= container.scrollWidth - container.clientWidth;
}

// í˜„ì¬ í˜ì´ì§€ì— ë§ëŠ” íƒ­ í™œì„±í™”
function setActiveTab(category) {
  // ëª¨ë“  íƒ­ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
  document.querySelectorAll('.tab-link').forEach(link => {
    link.classList.remove('active');
  });
  
  // í˜„ì¬ ì¹´í…Œê³ ë¦¬ íƒ­ í™œì„±í™”
  const activeTab = document.querySelector(`[data-category="${category}"]`);
  if (activeTab) {
    activeTab.classList.add('active');
    
    // í™œì„± íƒ­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
    scrollToActiveTab(activeTab);
    
    // ìŠ¤í¬ë¦° ë¦¬ë”ì— ì•Œë¦¼
    updateNavSummary(category);
  }
}

// í™œì„± íƒ­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
function scrollToActiveTab(tab) {
  const container = document.querySelector('.nav-scroll-container');
  const tabRect = tab.getBoundingClientRect();
  const containerRect = container.getBoundingClientRect();
  
  if (tabRect.left < containerRect.left || tabRect.right > containerRect.right) {
    const scrollLeft = tab.offsetLeft - (container.clientWidth / 2) + (tab.offsetWidth / 2);
    container.scrollTo({
      left: scrollLeft,
      behavior: 'smooth'
    });
  }
}

// ë„¤ë¹„ê²Œì´ì…˜ ìš”ì•½ ì—…ë°ì´íŠ¸ (ì ‘ê·¼ì„±)
function updateNavSummary(category) {
  const summary = document.getElementById('navSummary');
  if (!summary) return;
  
  const categoryNames = {
    baby: 'ì‹ ìƒì•„ ê°€ì •',
    student: 'í•™ë ¹ê¸° ê°€ì •',
    youth: 'ì²­ë…„ ë…ë¦½ê¸°',
    career: 'ê²½ë ¥ ë°œì „ê¸°',
    senior: 'ì€í‡´ ì¤€ë¹„ê¸°',
    disability: 'ì¥ì• ì¸ ì§€ì›',
    women: 'ì—¬ì„±/ê°€ì¡±',
    rural: 'ë†ì–´ì´Œ',
    culture: 'ë¬¸í™”/ì—¬ê°€',
    emergency: 'ê¸´ê¸‰ìƒí™©',
    business: 'ì‚¬ì—…ì ì§€ì›'
  };
  
  const categoryName = categoryNames[category] || category;
  summary.textContent = `í˜„ì¬ ${categoryName} í˜ì´ì§€ì…ë‹ˆë‹¤. ì´ 11ê°œì˜ ì¹´í…Œê³ ë¦¬ê°€ ìˆìŠµë‹ˆë‹¤.`;
}

// í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
function setupKeyboardNavigation() {
  document.addEventListener('keydown', (e) => {
    const activeTab = document.querySelector('.tab-link.active');
    if (!activeTab) return;
    
    let nextTab = null;
    
    if (e.key === 'ArrowLeft') {
      nextTab = activeTab.closest('.tab-item').previousElementSibling?.querySelector('.tab-link');
      e.preventDefault();
    } else if (e.key === 'ArrowRight') {
      nextTab = activeTab.closest('.tab-item').nextElementSibling?.querySelector('.tab-link');
      e.preventDefault();
    } else if (e.key === 'Home') {
      nextTab = document.querySelector('.tab-link');
      e.preventDefault();
    } else if (e.key === 'End') {
      const allTabs = document.querySelectorAll('.tab-link');
      nextTab = allTabs[allTabs.length - 1];
      e.preventDefault();
    }
    
    if (nextTab) {
      nextTab.focus();
      // ì‹¤ì œ í˜ì´ì§€ ì´ë™ì€ í•˜ì§€ ì•Šê³  í¬ì»¤ìŠ¤ë§Œ ì´ë™
    }
  });
}

// í„°ì¹˜ ìŠ¤ì™€ì´í”„ ì§€ì›
function setupTouchNavigation() {
  const container = document.querySelector('.nav-scroll-container');
  let startX = 0;
  let scrollStart = 0;
  
  container.addEventListener('touchstart', (e) => {
    startX = e.touches[0].clientX;
    scrollStart = container.scrollLeft;
  }, { passive: true });
  
  container.addEventListener('touchmove', (e) => {
    if (!startX) return;
    
    const currentX = e.touches[0].clientX;
    const diffX = startX - currentX;
    
    container.scrollLeft = scrollStart + diffX;
    updateScrollIndicator();
  }, { passive: true });
  
  container.addEventListener('touchend', () => {
    startX = 0;
    updateNavigationControls();
  }, { passive: true });
}

// ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
function setupScrollListeners() {
  const container = document.querySelector('.nav-scroll-container');
  
  container.addEventListener('scroll', () => {
    updateScrollIndicator();
    updateNavigationControls();
  }, { passive: true });
}

// ë„¤ë¹„ê²Œì´ì…˜ ì´ˆê¸°í™”
function initializeNavigation() {
  setupKeyboardNavigation();
  setupTouchNavigation();
  setupScrollListeners();
  updateScrollIndicator();
  updateNavigationControls();
  
  // í˜„ì¬ í˜ì´ì§€ ì¹´í…Œê³ ë¦¬ ê°ì§€ ë° í™œì„±í™”
  const currentPath = window.location.pathname;
  const categories = ['baby', 'student', 'youth', 'career', 'senior', 'disability', 'women', 'rural', 'culture', 'emergency', 'business'];
  
  for (const category of categories) {
    if (currentPath.includes(category)) {
      setActiveTab(category);
      break;
    }
  }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', initializeNavigation);

// ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸ ì²˜ë¦¬
window.addEventListener('resize', () => {
  updateScrollIndicator();
  updateNavigationControls();
}, { passive: true });

// ì „ì—­ í•¨ìˆ˜ ë…¸ì¶œ
window.setActiveTab = setActiveTab;
window.scrollNavigation = scrollNavigation;
</script>